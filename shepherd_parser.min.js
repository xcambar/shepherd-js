/* Jison generated parser */var shepherd_parser=function(){var a={trace:function(){},yy:{},symbols_:{error:2,Program:3,EOF:4,ProgramElement:5,ModuleDeclaration:6,ImportDeclaration:7,ExportDeclaration:8,ModuleSpecifier:9,Path:10,String:11,module:12,Id:13,at:14,SEMICOLON:15,IS:16,ImportSource:17,OPEN_BRACE:18,ModuleBody:19,CLOSE_BRACE:20,from:21,"import":22,ImportSpecifierSet:23,WILDCARD:24,ImportSpecifier:25,ImportSpecifierNext:26,COMMA:27,COLON:28,"export":29,ExportSpecifierSet:30,ExportSpecifierSetNext:31,ExportSpecifier:32,ExportSpecifierNext:33,ModuleElement:34,PERIOD:35,$accept:0,$end:1},terminals_:{2:"error",4:"EOF",11:"String",12:"module",13:"Id",14:"at",15:"SEMICOLON",16:"IS",18:"OPEN_BRACE",20:"CLOSE_BRACE",21:"from",22:"import",24:"WILDCARD",27:"COMMA",28:"COLON",29:"export",35:"PERIOD"},productions_:[0,[3,1],[3,2],[5,1],[5,1],[5,1],[9,1],[9,1],[6,5],[6,5],[6,5],[17,1],[17,3],[7,5],[23,1],[23,1],[23,4],[26,3],[26,0],[25,1],[25,3],[8,4],[31,3],[31,0],[30,4],[30,1],[30,1],[30,3],[32,1],[32,3],[33,3],[33,0],[19,2],[19,2],[19,2],[19,0],[34,1],[34,1],[10,1],[10,3]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return{};case 2:return f[h-1];case 3:this.$={type:"module",decl:f[h]};break;case 4:this.$={type:"import",decl:f[h]};break;case 5:this.$={type:"export",decl:f[h]};break;case 6:this.$={type:"module",path:f[h]};break;case 7:this.$={type:"uri",path:f[h].replace(/^['"]/,"").replace(/['"]$/,"")};break;case 8:this.$={id:f[h-3],path:f[h-1]};break;case 9:this.$={id:f[h-3],src:f[h-1]};break;case 10:this.$={id:f[h-3],expressions:f[h-1]};break;case 11:this.$=f[h];break;case 12:var i={id:f[h-2]};i[f[h].type]=f[h].path,this.$=i;break;case 13:this.$={from:f[h-1],vars:f[h-3]};break;case 14:this.$=[f[h]];break;case 15:this.$=[f[h]];break;case 16:this.$=[f[h-2]].concat(f[h-1]);break;case 17:this.$=typeof f[h]!="undefined"?[f[h-1]].concat(f[h]):f[h-1];break;case 19:this.$=f[h];break;case 20:this.$={remote:f[h-2],local:f[h]};break;case 21:this.$=typeof f[h-1]!="undefined"?f[h-2].concat(f[h-1]):f[h-2];break;case 22:this.$=typeof f[h]!="undefined"?f[h-1].concat(f[h]):f[h-1];break;case 24:this.$=typeof f[h-1]!="undefined"?[f[h-2]].concat(f[h-1]):[f[h-2]];break;case 25:this.$=[f[h]];break;case 26:this.$=[f[h]];break;case 27:this.$=[{from:f[h]}];break;case 28:this.$=f[h];break;case 29:this.$={local:f[h-2],remote:f[h]};break;case 30:this.$=typeof f[h]!="undefined"?[f[h-1]].concat(f[h]):[f[h-1]];break;case 32:this.$=[{type:"module",decl:f[h-1]}].concat(f[h]);break;case 33:this.$=[{type:"import",decl:f[h-1]}].concat(f[h]);break;case 34:this.$=[{type:"export",decl:f[h-1]}].concat(f[h]);break;case 35:this.$=[];break;case 36:this.$=f[h];break;case 37:this.$=f[h];break;case 38:this.$=f[h];break;case 39:this.$=f[h-2]+"."+f[h]}},table:[{3:1,4:[1,2],5:3,6:4,7:5,8:6,12:[1,7],22:[1,8],29:[1,9]},{1:[3]},{1:[2,1]},{4:[1,10]},{4:[2,3]},{4:[2,4]},{4:[2,5]},{13:[1,11]},{13:[1,13],18:[1,15],23:12,24:[1,14]},{13:[1,18],18:[1,17],24:[1,19],30:16},{1:[2,2]},{14:[1,20],16:[1,21],18:[1,22]},{21:[1,23]},{21:[2,14]},{21:[2,15]},{13:[1,25],25:24},{15:[2,23],27:[1,27],31:26},{13:[1,29],32:28},{15:[2,25],27:[2,25]},{15:[2,26],21:[1,30],27:[2,26]},{11:[1,31]},{13:[1,33],17:32},{6:35,7:36,8:37,12:[1,7],19:34,20:[2,35],22:[1,8],29:[1,9]},{9:38,10:39,11:[1,40],13:[1,41]},{20:[2,18],26:42,27:[1,43]},{20:[2,19],27:[2,19],28:[1,44]},{15:[1,45]},{13:[1,18],18:[1,17],24:[1,19],30:46},{20:[2,31],27:[1,48],33:47},{20:[2,28],27:[2,28],28:[1,49]},{10:50,13:[1,41]},{15:[1,51]},{15:[1,52]},{15:[2,11],21:[1,53]},{20:[1,54]},{6:35,7:36,8:37,12:[1,7],19:55,20:[2,35],22:[1,8],29:[1,9]},{6:35,7:36,8:37,12:[1,7],19:56,20:[2,35],22:[1,8],29:[1,9]},{6:35,7:36,8:37,12:[1,7],19:57,20:[2,35],22:[1,8],29:[1,9]},{15:[1,58]},{15:[2,6]},{15:[2,7]},{15:[2,38],20:[2,38],27:[2,38],35:[1,59]},{20:[1,60]},{13:[1,25],25:61},{10:62,13:[1,41]},{4:[2,21],12:[2,21],20:[2,21],22:[2,21],29:[2,21]},{15:[2,23],27:[1,27],31:63},{20:[1,64]},{13:[1,29],32:65},{10:66,13:[1,41]},{15:[2,27],27:[2,27]},{4:[2,8],12:[2,8],20:[2,8],22:[2,8],29:[2,8]},{4:[2,9],12:[2,9],20:[2,9],22:[2,9],29:[2,9]},{9:67,10:39,11:[1,40],13:[1,41]},{4:[2,10],12:[2,10],20:[2,10],22:[2,10],29:[2,10]},{20:[2,32]},{20:[2,33]},{20:[2,34]},{4:[2,13],12:[2,13],20:[2,13],22:[2,13],29:[2,13]},{10:68,13:[1,41]},{21:[2,16]},{20:[2,18],26:69,27:[1,43]},{20:[2,20],27:[2,20]},{15:[2,22]},{15:[2,24],27:[2,24]},{20:[2,31],27:[1,48],33:70},{20:[2,29],27:[2,29]},{15:[2,12]},{15:[2,39],20:[2,39],27:[2,39]},{20:[2,17]},{20:[2,30]}],defaultActions:{2:[2,1],4:[2,3],5:[2,4],6:[2,5],10:[2,2],13:[2,14],14:[2,15],39:[2,6],40:[2,7],55:[2,32],56:[2,33],57:[2,34],60:[2,16],63:[2,22],67:[2,12],69:[2,17],70:[2,30]},parseError:function(a,b){throw new Error(a)},parse:function f(a){function n(a){c.length=c.length-2*a,d.length=d.length-a,e.length=e.length-a}function o(){var a;return a=b.lexer.lex()||1,typeof a!="number"&&(a=b.symbols_[a]||a),a}var b=this,c=[0],d=[null],e=[],f=this.table,g="",h=0,i=0,j=0,k=2,l=1;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var m=this.lexer.yylloc;e.push(m),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);var p,q,r,s,t,u,v={},w,x,y,z;for(;;){r=c[c.length-1],this.defaultActions[r]?s=this.defaultActions[r]:(p==null&&(p=o()),s=f[r]&&f[r][p]);A:if(typeof s=="undefined"||!s.length||!s[0]){if(!j){z=[];for(w in f[r])this.terminals_[w]&&w>2&&z.push("'"+this.terminals_[w]+"'");var B="";this.lexer.showPosition?B="Parse error on line "+(h+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+z.join(", ")+", got '"+this.terminals_[p]+"'":B="Parse error on line "+(h+1)+": Unexpected "+(p==1?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(B,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:m,expected:z})}if(j==3){if(p==l)throw new Error(B||"Parsing halted.");i=this.lexer.yyleng,g=this.lexer.yytext,h=this.lexer.yylineno,m=this.lexer.yylloc,p=o()}for(;;){if(k.toString()in f[r])break;if(r==0)throw new Error(B||"Parsing halted.");n(1),r=c[c.length-1]}q=p,p=k,r=c[c.length-1],s=f[r]&&f[r][k],j=3}if(s[0]instanceof Array&&s.length>1)throw new Error("Parse Error: multiple actions possible at state: "+r+", token: "+p);switch(s[0]){case 1:c.push(p),d.push(this.lexer.yytext),e.push(this.lexer.yylloc),c.push(s[1]),p=null,q?(p=q,q=null):(i=this.lexer.yyleng,g=this.lexer.yytext,h=this.lexer.yylineno,m=this.lexer.yylloc,j>0&&j--);break;case 2:x=this.productions_[s[1]][1],v.$=d[d.length-x],v._$={first_line:e[e.length-(x||1)].first_line,last_line:e[e.length-1].last_line,first_column:e[e.length-(x||1)].first_column,last_column:e[e.length-1].last_column},u=this.performAction.call(v,g,i,h,this.yy,s[1],d,e);if(typeof u!="undefined")return u;x&&(c=c.slice(0,-1*x*2),d=d.slice(0,-1*x),e=e.slice(0,-1*x)),c.push(this.productions_[s[1]][0]),d.push(v.$),e.push(v._$),y=f[c[c.length-2]][c[c.length-1]],c.push(y);break;case 3:return!0}}return!0}},b=function(){var a={EOF:1,parseError:function b(a,b){if(this.yy.parseError)this.yy.parseError(a,b);else throw new Error(a)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.match+=a,this.matched+=a;var b=a.match(/\n/);return b&&this.yylineno++,this._input=this._input.slice(1),a},unput:function(a){return this._input=a+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=(new Array(a.length+1)).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e,f;this._more||(this.yytext="",this.match="");var g=this._currentRules();for(var h=0;h<g.length;h++){c=this._input.match(this.rules[g[h]]);if(c&&(!b||c[0].length>b[0].length)){b=c,d=h;if(!this.options.flex)break}}if(b){f=b[0].match(/\n.*/g),f&&(this.yylineno+=f.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:f?f[f.length-1].length-1:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,g[d],this.conditionStack[this.conditionStack.length-1]);if(a)return a;return}if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return typeof a!="undefined"?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){var e=d;switch(c){case 0:break;case 1:break;case 2:break;case 3:return"SEMICOLON";case 4:return"COLON";case 5:return"OPEN_BRACE";case 6:return"CLOSE_BRACE";case 7:return"module";case 8:return"import";case 9:return"export";case 10:return 14;case 11:return 16;case 12:return 21;case 13:return"WILDCARD";case 14:return 27;case 15:return 35;case 16:return"Id";case 17:return"String";case 18:return"String";case 19:return 4}},a.rules=[/^\n+/,/^\s+/,/^\t+/,/^;/,/^:/,/^\{/,/^\}/,/^module\b/,/^import\b/,/^export\b/,/^at\b/,/^is\b/,/^from\b/,/^\*/,/^,/,/^\./,/^[a-zA-Z_$][0-9a-zA-Z_$]*/,/^'.+'/,/^".+"/,/^$/],a.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19],inclusive:!0}},a}();return a.lexer=b,a}();typeof require!="undefined"&&typeof exports!="undefined"&&(exports.parser=shepherd_parser,exports.parse=function(){return shepherd_parser.parse.apply(shepherd_parser,arguments)},exports.main=function a(a){if(!a[1])throw new Error("Usage: "+a[0]+" FILE");if(typeof process!="undefined")var b=require("fs").readFileSync(require("path").join(process.cwd(),a[1]),"utf8");else var c=require("file").path(require("file").cwd()),b=c.join(a[1]).read({charset:"utf-8"});return exports.parser.parse(b)},typeof module!="undefined"&&require.main===module&&exports.main(typeof process!="undefined"?process.argv.slice(1):require("system").args))